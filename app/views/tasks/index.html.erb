<%= render "shared/header"%>
<div class="task-container">
  <div class="new-tweet-field">
    <%= form_with(model: @task, local: true) do |f| %>
      <%= render 'shared/error_messages', model: f.object %>
      <%= f.text_field :title, class:"tweets-text", placeholder:"登録したいタスクを記入してください" ,rows:"1" %>
      <%= f.submit '登録する' , id: "submit" %>
    <% end %>
  </div>
  
  <div class="task-search-field">
    <%= search_form_for @q, class:"search-form", local: true do |f| %>
      <%= f.search_field  :title_cont, placeholder: "キーワードからタスクを探す", class: 'input-box' %>
      <label class="search-button">
        <%= image_tag "search.png", class:"search-icon" %>
        <%= f.submit '検索', class: "hidden" %>
      </label>
    <% end %>
  </div>

  <div class="todo-tab">
    <div class="todo">
      タスク一覧
    </div>
    <div class="done">
      完了したタスク
    </div>
  </div>

  <div class="task-index">
    <% @tasks.each do |task| %>
      <div class="task-title">
        <div class="task-top">
          <div>
            <%= task.title %>
          </div>
          <div>
            <% if user_signed_in? && current_user.id == task.user_id %>
              <%= link_to edit_task_path(task.id), class:"edit-link" do %>
                <i class="fas fa-edit"></i>編集
              <% end %>
              <%= link_to task_path(task.id), class:"trash-link", method: :delete, data: { confirm: '本当に削除しますか？' } do %>
                <i class="fas fa-trash"></i>削除
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="task-bottom">
          登録日時：<%= task.updated_at.to_s(:datetime_jp) %>
        </div>
      </div>  
    <% end %>
    <div class="pagenation">
      <%= paginate @tasks %>
      <%= page_entries_info @tasks %>
    </div>
  </div>
    
</div>
